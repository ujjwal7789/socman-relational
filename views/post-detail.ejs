<%- include('partials/header', { title: 'View Post' }) %>

<header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-700 mb-2 sm:mb-0">Forum Post</h1>
    <div>
        <a href="/forum" class="text-blue-600 hover:underline mr-4">Back to All Posts</a>
        <button onclick="logout()"
            class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">Logout</button>
    </div>
</header>

<main>
    <!-- Section 1: The Post Content -->
    <!-- We give this a unique ID for our JS to easily find and populate it -->
    <div id="postDetailContainer" class="bg-white p-6 rounded-lg shadow-lg mb-8">
        <!-- Initial loading message -->
        <p class="text-center text-gray-500">Loading post...</p>
    </div>

    <!-- Section 2: The Comments Section -->
    <div class="space-y-6">
        <h2 class="text-2xl font-semibold text-gray-600 border-b pb-2">Comments</h2>
        <!-- We give this a unique ID for our JS to find and populate the comments -->
        <div id="commentsContainer" class="space-y-4">
             <!-- Initial loading message -->
            <p class="text-gray-500">Loading comments...</p>
        </div>
    </div>

    <!-- Section 3: The "Add a Comment" Form -->
    <div class="mt-8 bg-white p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4">Leave a Comment</h3>
        <form id="commentForm" class="space-y-4">
            <div>
                <label for="commentText" class="block text-sm font-medium text-gray-700 sr-only">Comment</label>
                <textarea id="commentText" name="commentText" rows="4" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm" placeholder="Write your comment here..." required></textarea>
            </div>
            <button type="submit" class="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-800 text-white font-bold py-2 px-4 rounded-md transition duration-200">Submit Comment</button>
        </form>
        <p id="commentFormMessage" class="mt-4 text-sm font-medium"></p>
    </div>
</main>

<!-- And finally, the script that will power this entire page -->
<script src="/js/post-detail.js"></script>

<!-- Mistake from your code: Missing the final '%>' in the footer include -->
<%- include('partials/footer') %>