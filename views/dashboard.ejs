<!-- views/dashboard.ejs (Styled with Tailwind) -->

<%- include('partials/header', { title: 'Dashboard' }) %>

<header class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 border-b pb-4">
    <div>
        <h1 class="text-3xl font-bold text-gray-700">Welcome, <%= user.name %>!</h1>
        <p class="text-md text-gray-500">Your Role: <span class="font-semibold text-indigo-600"><%= user.role.charAt(0).toUpperCase() + user.role.slice(1) %></span></p>
    </div>
    <button onclick="logout()" class="mt-4 sm:mt-0 bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">Logout</button>
</header>

<main>
    <h2 class="text-2xl font-semibold text-gray-600 mb-4">Dashboard Menu</h2>
    
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        
        <!-- EJS Conditional Logic to show the right cards -->
        <% if (user.role === 'admin') { %>
            <!-- Admin Menu Cards -->
            <a href="/apartments" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Manage Apartments</h3>
                <p class="text-gray-600 text-sm mt-1">Create, view, and assign residents.</p>
            </a>
            
            <a href="/amenities" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Manage Amenities</h3>
                <p class="text-gray-600 text-sm mt-1">Add or remove bookable facilities.</p>
            </a>
            
            <a href="/bookings" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">View All Bookings</h3>
                <p class="text-gray-600 text-sm mt-1">Monitor and manage all reservations.</p>
            </a>

            <a href="/helpdesk" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">View All Helpdesk Tickets</h3>
                <p class="text-gray-600 text-sm mt-1">Monitor and manage all helpdesk tickets.</p>
            </a>
            
            <a href="/manage-notices" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">View and Manage Notices</h3>
                <p class="text-gray-600 text-sm mt-1">Monitor and manage all notices.</p>
            </a>

            <!-- Add more admin cards here -->

        <% } else if (user.role === 'resident') { %>
            <!-- Resident Menu Cards -->
            <a href="/forum" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Community Forum</h3>
                <p class="text-gray-600 text-sm mt-1">Discuss with your neighbors.</p>
            </a>
            
            <a href="/amenities/book" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Book an Amenity</h3>
                <p class="text-gray-600 text-sm mt-1">Reserve the clubhouse or pool.</p>
            </a>

            <a href="/helpdesk/my-tickets" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Tickets</h3>
                <p class="text-gray-600 text-sm mt-1">View all tickets raised by you.</p>
            </a>


            <!-- Add more resident cards here -->
        <% } %>

        <% if (user.role === 'admin' || user.role === 'staff') { %>
            <!-- Show this card to BOTH Admins and Staff -->
            <a href="/helpdesk/assigned-to-me" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">My Assigned Tickets</h3>
                <p class="text-gray-600 text-sm mt-1">View and update tickets assigned to you.</p>
            </a>
        <% } %>

        <a href="/notices" class="bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200">
                <h3 class="font-bold text-lg text-gray-800">Notices</h3>
                <p class="text-gray-600 text-sm mt-1">View the society notice board.</p>
            </a>

    </div>
</main>

<%- include('partials/footer') %>